Crew result: ```json
{
  "status": "complete",
  "document_md": "# Especificação Funcional - Gerenciador de Editais\n\n**Versão:** 1.0  \n**Data:** 2025-12-08  \n**Baseado em:** Requisitos v1  \n**Status:** complete  \n**trace_id:** 7f3d8a2e-5b1c-4d9f-a6e2-8c4b1f9d3e7a\n\n---\n\n## 1. Introdução\n\n### 1.1 Objetivo do Documento\nEste documento tem como objetivo descrever a Especificação Funcional detalhada do Sistema de IA para Gestão de Licitações Públicas (Gerenciador de Editais), baseado no Documento de Requisitos versão 1.0. O documento serve como referência técnica para as equipes de desenvolvimento, testes e stakeholders, definindo comportamentos esperados, casos de uso e regras de negócio.\n\n### 1.2 Escopo do Sistema\n**Incluído no escopo:**\n- Cadastro inteligente de portfólio de produtos com campos parametrizáveis por classe\n- Captura automática de editais de fontes públicas federais, estaduais e municipais\n- Análise de aderência técnica e administrativa com IA\n- Geração automática de propostas completas\n- Monitoramento pós-submissão e gestão de contratos ganhos\n- Integração com sistemas governamentais (PNCP, ANVISA, CATMAT)\n\n**Excluído do escopo:**\n- Integração com sistemas ERP internos (fase futura)\n- Execução automática de lances em pregões eletrônicos\n- Gestão financeira de contratos\n\n### 1.3 Definições, Acrônimos e Abreviações\n| Termo | Definição |\n|-------|----------|\n| PNCP | Portal Nacional de Contratações Públicas |\n| CATMAT | Catálogo de Materiais do Governo Federal |\n| ANVISA | Agência Nacional de Vigilância Sanitária |\n| Aderência | Grau de conformidade do produto com requisitos do edital |\n| Comodato | Contrato de empréstimo de equipamento com fornecimento de consumíveis |\n| ARP | Ata de Registro de Preços |\n| ICP-Brasil | Infraestrutura de Chaves Públicas Brasileira |\n\n### 1.4 Referências\n- Documento de Requisitos v1.0 (2025-12-08)\n- Lei 14.133/2021 (Nova Lei de Licitações)\n- ISO/IEC 27001:2022 - Information Security Management\n- ISO/IEC/IEEE 29148:2018 - Requirements Engineering\n- LGPD (Lei 13.709/2018)\n- NIST AI Risk Management Framework\n\n---\n\n## 2. Visão Geral do Sistema\n\n### 2.1 Perspectiva do Sistema\nO Gerenciador de Editais é um sistema inteligente baseado em agentes de IA que automatiza o ciclo completo de participação em licitações públicas brasileiras. Opera no mercado B2G (Business-to-Government) de saúde, integrando-se a portais governamentais e sistemas regulatórios. Conforme arquitetura Event-Driven E-Procurement, utiliza processamento assíncrono para captura, análise e geração de propostas.\n\n### 2.2 Principais Funcionalidades\n1. **Cadastro Inteligente** - Portfólio com IA para enriquecimento automático\n2. **Captura Automatizada** - Monitoramento 4x/dia de fontes públicas\n3. **Análise de Aderência** - Score 0-100 com precisão >90%\n4. **Geração de Propostas** - Documentação completa automatizada\n5. **Gestão Pós-Ganho** - Monitoramento de pedidos e empenhos\n\n### 2.3 Usuários e Características\n| Ator | Tipo | Responsabilidades |\n|------|------|-------------------|\n| Empresa Participante (A-001) | Humano | Cadastra portfólio, decide participação, aprova propostas |\n| Órgãos Públicos (A-002) | Externo | Publicam editais, recebem propostas |\n| Agente de IA (A-003) | Sistema | Captura editais, analisa aderência, gera propostas |\n| Gestor de Proposta (A-004) | Humano | Revisa propostas, faz ajustes, autoriza envio |\n| PNCP/ComprasNet (A-005) | Externo | Centraliza publicações federais |\n| ANVISA (A-006) | Externo | Valida registros de produtos de saúde |\n\n### 2.4 Restrições Gerais\n- Compliance obrigatório com Lei 14.133/2021 e LGPD\n- Suporte a assinatura digital ICP-Brasil (certificados A1/A3)\n- Disponibilidade mínima de 99.5% (SLA)\n- Processamento NLP em português brasileiro\n\n### 2.5 Premissas e Dependências\n- APIs governamentais (PNCP, ANVISA) disponíveis e documentadas\n- Infraestrutura cloud com DR em região diferente\n- Certificados digitais ICP-Brasil válidos para assinatura\n\n---\n\n## 3. Requisitos Funcionais Detalhados\n\n**RF-001: Cadastro Inteligente do Portfólio**\n- **Descrição:** Máscara de entrada totalmente parametrizável para características técnicas de produtos por classe, permitindo CRUD completo com campos dinâmicos\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.2#FR-001\n- **Critérios de Aceitação:**\n  1. Sistema permite criar, ler, atualizar e excluir produtos\n  2. Campos dinâmicos configuráveis por classe de produto\n  3. Validação automática de dados obrigatórios\n  4. Interface responsiva com tempo de resposta <2s\n- **Regras de Negócio Associadas:** RN-007\n- **Dependências:** Nenhuma\n\n**RF-002: Leitura de Manuais por IA**\n- **Descrição:** A IA realiza leitura dos manuais técnicos (PDF/DOC) e sugere novos campos ou requisitos faltantes para enriquecer o cadastro\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-002\n- **Critérios de Aceitação:**\n  1. Processamento de documentos PDF e DOC em <30 segundos\n  2. Extração automática de especificações técnicas\n  3. Sugestão de campos com confiança >85%\n  4. Interface para aceitar/rejeitar sugestões\n- **Dependências:** FR-001\n\n**RF-003: Agente de Captura de Certames**\n- **Descrição:** Agente autônomo monitora diariamente fontes públicas (federal, estaduais, municipais) e captura novos editais\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.2#FR-003\n- **Critérios de Aceitação:**\n  1. Execução automática 4x/dia\n  2. Cobertura de 3 esferas governamentais\n  3. Log completo de captura com timestamps\n  4. Tempo de ciclo <30 minutos\n- **Regras de Negócio Associadas:** RN-004, RN-005\n- **Dependências:** FR-018\n\n**RF-004: Interpretação de Cláusulas**\n- **Descrição:** O sistema lê o edital, interpreta cláusulas técnicas e administrativas e calcula automaticamente o grau de aderência\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.1#FR-004\n- **Critérios de Aceitação:**\n  1. Precisão >90% na extração de cláusulas\n  2. Score de aderência 0-100 calculado automaticamente\n  3. Tempo de análise completa <5 minutos por edital\n  4. Suporte a jargão jurídico brasileiro\n- **Regras de Negócio Associadas:** RN-001\n- **Dependências:** FR-003\n\n**RF-005: Identificação de Gaps**\n- **Descrição:** Para aderências entre 85% e 100%, o sistema informa quais são os gaps para melhorar produtos\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-005\n- **Critérios de Aceitação:**\n  1. Lista gaps específicos por requisito não atendido\n  2. Sugere ações corretivas acionáveis\n  3. Priorização de gaps por impacto\n- **Regras de Negócio Associadas:** RN-001\n- **Dependências:** FR-004\n\n**RF-006: Classificação de Editais**\n- **Descrição:** Classificação parametrizável: Comodato, Aluguel c/ reagentes, Aluguel s/ reagentes, Venda, Consumo reagente, Consumo insumos\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-006\n- **Critérios de Aceitação:**\n  1. 6 categorias configuráveis pelo usuário\n  2. Filtros funcionais por categoria\n  3. Classificação automática com >90% precisão\n- **Regras de Negócio Associadas:** RN-002\n- **Dependências:** FR-003\n\n**RF-007: Sugestão de Participação**\n- **Descrição:** IA identifica produtos aderentes e recomenda participação com justificativa técnica\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.2#FR-007\n- **Critérios de Aceitação:**\n  1. Recomendação GO/NO-GO clara\n  2. Lista de produtos compatíveis com scores\n  3. Justificativa técnica detalhada\n  4. Threshold de confiança >95% para aprovação automática\n- **Regras de Negócio Associadas:** RN-001\n- **Dependências:** FR-004, FR-009\n\n**RF-008: Listagem de Requisitos**\n- **Descrição:** Lista requisitos técnicos, administrativos, documentais e anexos obrigatórios para proposta\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.1#FR-008\n- **Critérios de Aceitação:**\n  1. Checklist completo gerado automaticamente\n  2. Nenhum requisito omitido (100% cobertura)\n  3. Categorização por tipo de requisito\n- **Dependências:** FR-004\n\n**RF-009: Score de Aderência e Potencial**\n- **Descrição:** Gera score de aderência e score de potencial de ganho baseado em histórico\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.1#FR-009\n- **Critérios de Aceitação:**\n  1. Scores 0-100 para aderência e potencial\n  2. Histórico mínimo de 6 meses considerado\n  3. Atualização em tempo real\n- **Regras de Negócio Associadas:** RN-001\n- **Dependências:** FR-004\n\n**RF-010: Análise de Submissões Anteriores**\n- **Descrição:** Informa relação de submissões anteriores com sucessos, insucessos e causas potenciais\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-010\n- **Critérios de Aceitação:**\n  1. Histórico acessível com filtros\n  2. Causas categorizadas por tipo\n  3. Visualização comparativa\n- **Dependências:** Nenhuma\n\n**RF-011: Sugestões de Negociação**\n- **Descrição:** Para scores parciais, aponta requisitos não atendidos com sugestões de negociação\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-011\n- **Critérios de Aceitação:**\n  1. Sugestões acionáveis por requisito\n  2. Probabilidade de sucesso estimada\n- **Dependências:** FR-009\n\n**RF-012: Gestão de Atas**\n- **Descrição:** Para Atas de Registro de Preços: comparativo valores ata vs compras reais e pedidos correntes\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-012\n- **Critérios de Aceitação:**\n  1. Dashboard comparativo visual\n  2. Alertas de desvio >10%\n  3. Histórico de variações\n- **Regras de Negócio Associadas:** RN-003\n- **Dependências:** FR-017\n\n**RF-013: Geração Automática de Proposta**\n- **Descrição:** IA monta proposta completa: texto técnico, documentos, fichas técnicas, anexos, arquivo final\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.2#FR-013\n- **Critérios de Aceitação:**\n  1. PDF/DOCX gerado em <10 segundos\n  2. Todos anexos incluídos automaticamente\n  3. Validação de completude antes de gerar\n  4. Formatos aceitos por portais governamentais\n- **Regras de Negócio Associadas:** RN-007, RN-008\n- **Dependências:** FR-007, FR-008, FR-022\n\n**RF-014: Sugestão de Preços**\n- **Descrição:** Sugestão de preços baseada em ofertas praticadas em editais anteriores ou entrada manual\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.1#FR-014\n- **Critérios de Aceitação:**\n  1. Preço sugerido com base em histórico\n  2. Override manual permitido\n  3. Comparativo com Painel de Preços\n- **Dependências:** FR-021\n\n**RF-015: Painel de Revisão**\n- **Descrição:** Painel permite ajustes antes do envio da proposta\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.2#FR-015\n- **Critérios de Aceitação:**\n  1. Interface de edição inline\n  2. Preview da proposta final\n  3. Versionamento automático\n  4. Controle de aprovação\n- **Dependências:** FR-013\n\n**RF-016: Monitoramento Pós-Submissão**\n- **Descrição:** Sistema monitora resultado após submissão; em caso de perdas, aponta causas e propostas de melhorias\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.1#FR-016\n- **Critérios de Aceitação:**\n  1. Notificação de resultado em <24h\n  2. Análise de causa-raiz automatizada\n  3. Sugestões de melhoria\n- **Dependências:** FR-015\n\n**RF-017: Gestão de Editais Ganhos**\n- **Descrição:** Monitora colocação de pedidos e empenhos; gera alertas sobre falta de pedidos após X dias\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.1#FR-017\n- **Critérios de Aceitação:**\n  1. Alertas parametrizáveis por período\n  2. Integração com dados públicos de empenhos\n  3. Dashboard de contratos ativos\n- **Regras de Negócio Associadas:** RN-003\n- **Dependências:** FR-016\n\n**RF-018: Integração API PNCP**\n- **Descrição:** Integração com API REST do PNCP para consulta e publicação de editais conforme Lei 14.133/2021 Art. 174\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.4#FR-018\n- **Critérios de Aceitação:**\n  1. API conectada com autenticação\n  2. Sync diário automático\n  3. Compliance com Lei 14.133/2021\n  4. Rate limiting respeitado\n- **Regras de Negócio Associadas:** RN-004, RN-005\n- **Dependências:** Nenhuma\n\n**RF-019: Validação Registro ANVISA**\n- **Descrição:** Validação de registro ANVISA ativo para todos os produtos de saúde cadastrados\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.4#FR-019\n- **Critérios de Aceitação:**\n  1. Consulta API ANVISA em tempo real\n  2. Bloqueio automático de produtos vencidos\n  3. Alertas de vencimento próximo\n- **Regras de Negócio Associadas:** RN-007\n- **Dependências:** FR-001\n\n**RF-020: Integração CATMAT/CATSER**\n- **Descrição:** Classificação de produtos conforme catálogo federal obrigatório\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.4#FR-020\n- **Critérios de Aceitação:**\n  1. Código CATMAT vinculado a cada produto\n  2. Busca por categoria funcional\n  3. Sincronização periódica\n- **Dependências:** FR-001\n\n**RF-021: Consulta Painel de Preços**\n- **Descrição:** Integração com Painel de Preços do governo para estimativas conforme Lei 14.133 Art. 23\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.4#FR-021\n- **Critérios de Aceitação:**\n  1. Preços de referência atualizados\n  2. Histórico de preços disponível\n  3. Comparativo automatizado\n- **Dependências:** Nenhuma\n\n**RF-022: Geração de Certidões**\n- **Descrição:** Automação de consulta/geração de certidões negativas (CND, FGTS, Trabalhista)\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.4#FR-022\n- **Critérios de Aceitação:**\n  1. Certidões válidas anexadas automaticamente\n  2. Alerta de vencimento com 5 dias de antecedência\n  3. Renovação automática quando possível\n- **Regras de Negócio Associadas:** RN-008\n- **Dependências:** Nenhuma\n\n**RF-023: Monitoramento de Impugnações**\n- **Descrição:** Monitoramento de impugnações e recursos em editais de interesse\n- **Prioridade:** Média\n- **Origem:** DOC-001#Section3.4#FR-023\n- **Critérios de Aceitação:**\n  1. Notificação em tempo real\n  2. Histórico de eventos do edital\n  3. Alertas de mudanças\n- **Dependências:** FR-003\n\n**RF-024: Verificação de Impedimentos**\n- **Descrição:** Consulta automática a CEIS, CNEP, CEPIM antes de submissão\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.5#FR-024\n- **Critérios de Aceitação:**\n  1. Consulta em tempo real antes de submissão\n  2. Bloqueio automático se impedido\n  3. Alerta detalhado com motivo\n- **Regras de Negócio Associadas:** RN-006\n- **Dependências:** Nenhuma\n\n**RF-025: Alertas de Prazos Legais**\n- **Descrição:** Notificação automática de prazos mínimos por modalidade (Pregão 8 dias, Concorrência 35 dias)\n- **Prioridade:** Alta\n- **Origem:** DOC-001#Section3.5#FR-025\n- **Critérios de Aceitação:**\n  1. Alertas por modalidade configurados\n  2. Notificação antecipada parametrizável\n  3. Countdown visual no dashboard\n- **Regras de Negócio Associadas:** RN-004, RN-005\n- **Dependências:** FR-003\n\n---\n\n## 4. Requisitos Não-Funcionais\n\n### 4.1 Requisitos de Performance\n\n**RNF-001: Monitoramento Diário**\n- **Descrição:** Suporte a monitoramento diário automático de múltiplas fontes públicas\n- **Métrica:** Execução 4x/dia; tempo <30min por ciclo\n- **Origem:** DOC-001#Section4.1#NFR-001\n\n**RNF-002: Processamento NLP**\n- **Descrição:** Processamento NLP para interpretação de cláusulas técnicas em português brasileiro\n- **Métrica:** Precisão >90%; suporte a jargão jurídico\n- **Origem:** DOC-001#Section4.1#NFR-002\n- **Referência:** NIST AI Risk Management Framework para accuracy metrics\n\n**RNF-005: Armazenamento Histórico**\n- **Descrição:** Armazenamento e indexação de histórico de licitações para análise de padrões\n- **Métrica:** Retenção 5 anos; busca <2s\n- **Origem:** DOC-001#Section4.1#NFR-005\n- **Padrão:** CQRS recomendado para separar modelos de leitura/escrita\n\n**RNF-011: Tempo de Processamento**\n- **Descrição:** Processamento de edital em tempo aceitável\n- **Métrica:** <5min análise completa; <10s geração proposta\n- **Origem:** DOC-001#Section4.3#NFR-011\n\n**RNF-012: Escalabilidade**\n- **Descrição:** Suporte a crescimento de volume de editais\n- **Métrica:** Horizontal scaling; cache distribuído\n- **Origem:** DOC-001#Section4.3#NFR-012\n\n### 4.2 Requisitos de Segurança\n\n**RNF-006: Segurança de Dados**\n- **Descrição:** Segurança de dados comerciais e estratégicos da empresa\n- **Métrica:** Criptografia AES-256; acesso auditado\n- **Origem:** DOC-001#Section4.1#NFR-006\n- **Padrão:** ISO/IEC 27001:2022 compliance\n\n**RNF-007: Assinatura Digital**\n- **Descrição:** Suporte a assinatura digital ICP-Brasil para documentos\n- **Métrica:** Certificados A1/A3; validação em tempo real\n- **Origem:** DOC-001#Section4.3#NFR-007\n- **Padrão:** ICP-Brasil DOC-ICP Standards\n\n**RNF-008: Audit Trail**\n- **Descrição:** Audit trail completo com logs imutáveis\n- **Métrica:** Todas ações logadas; retenção 5 anos\n- **Origem:** DOC-001#Section4.3#NFR-008\n- **Padrão:** Event Sourcing pattern recomendado\n\n**RNF-010: Conformidade LGPD**\n- **Descrição:** Conformidade LGPD para dados pessoais e comerciais\n- **Métrica:** Consentimento; anonimização; direitos titular\n- **Origem:** DOC-001#Section4.3#NFR-010\n\n### 4.3 Requisitos de Usabilidade\n\n**RNF-003: Interface Parametrizável**\n- **Descrição:** Interface parametrizável (Front End) para configurações de usuário\n- **Métrica:** Configurações sem código; <5 cliques para ação principal\n- **Origem:** DOC-001#Section4.2#NFR-003\n\n### 4.4 Requisitos de Confiabilidade\n\n**RNF-009: Alta Disponibilidade**\n- **Descrição:** Alta disponibilidade com DR em região diferente\n- **Métrica:** SLA 99.5%; RTO <4h; RPO <1h\n- **Origem:** DOC-001#Section4.3#NFR-009\n- **Padrão:** Warm Standby Disaster Recovery pattern\n\n### 4.5 Requisitos de Manutenibilidade\n\n**RNF-004: Exportação**\n- **Descrição:** Suporte a exportação para envio eletrônico e impressão\n- **Métrica:** PDF/A; DOCX; formatos aceitos por portais\n- **Origem:** DOC-001#Section4.2#NFR-004\n\n---\n\n## 5. Casos de Uso\n\n### 5.1 Diagrama de Casos de Uso\n\n**Atores:**\n- Empresa Participante (A-001)\n- Órgãos Públicos (A-002)\n- Agente de IA (A-003)\n- Gestor de Proposta (A-004)\n- PNCP/ComprasNet (A-005)\n- ANVISA (A-006)\n\n**Casos de Uso:**\n- UC-001: Cadastrar Produto no Portfólio\n- UC-002: Capturar Editais Automaticamente\n- UC-003: Analisar Aderência de Edital\n- UC-004: Recomendar Participação em Licitação\n- UC-005: Gerar Proposta Automaticamente\n- UC-006: Revisar e Ajustar Proposta\n- UC-007: Monitorar Resultado Pós-Submissão\n- UC-008: Gerenciar Editais Ganhos\n- UC-009: Verificar Impedimentos da Empresa\n- UC-010: Consultar Histórico de Submissões\n- UC-011: Classificar Edital por Modalidade\n- UC-012: Sugerir Preço para Proposta\n\n### 5.2 Especificação Detalhada de Casos de Uso\n\n---\n\n**UC-001: Cadastrar Produto no Portfólio**\n- **Ator Principal:** Empresa Participante (A-001)\n- **Atores Secundários:** Agente de IA (A-003)\n- **Objetivo:** Registrar um novo produto no portfólio da empresa com todas as características técnicas necessárias para participação em licitações\n\n- **Pré-condições:**\n  1. Usuário autenticado no sistema com perfil de Empresa Participante\n  2. Classe de produto previamente definida no sistema\n  3. Documentação técnica do produto disponível (manual, ficha técnica)\n\n- **Fluxo Principal:**\n  1. [Ator] Acessa o módulo \"Portfólio\" no menu principal\n  2. [Sistema] Exibe lista de produtos cadastrados com opção de adicionar novo\n  3. [Ator] Clica no botão \"Novo Produto\"\n  4. [Sistema] Apresenta formulário dinâmico baseado na classe de produto selecionada\n  5. [Ator] Preenche dados básicos: nome comercial, fabricante, modelo\n  6. [Sistema] Valida campos obrigatórios e formato dos dados em tempo real\n  7. [Ator] Faz envio do manual técnico em PDF/DOC\n  8. [Sistema] Aciona Agente de IA para leitura e extração de especificações\n  9. [Agente IA] Processa documento e sugere preenchimento automático de campos técnicos\n  10. [Sistema] Exibe campos sugeridos com indicador de confiança\n  11. [Ator] Revisa e confirma/ajusta sugestões da IA\n  12. [Ator] Informa número de registro ANVISA (se aplicável)\n  13. [Sistema] Consulta API ANVISA para validação do registro\n  14. [Sistema] Exibe status de validação (válido/inválido/vencimento próximo)\n  15. [Ator] Confirma cadastro clicando em \"Salvar\"\n  16. [Sistema] Persiste dados e exibe mensagem de sucesso\n  17. [Sistema] Vincula automaticamente código CATMAT via API\n\n- **Fluxos Alternativos:**\n  - A1. Produto sem registro ANVISA:\n    - No passo 12, ator indica que produto não requer registro\n    - Sistema registra justificativa e prossegue sem validação ANVISA\n    - Produto é marcado como \"Não regulado ANVISA\"\n  - A2. Envio de múltiplos documentos:\n    - No passo 7, ator seleciona vários arquivos\n    - Sistema processa cada documento sequencialmente\n    - IA consolida sugestões de todos os documentos\n\n- **Fluxos de Exceção:**\n  - E1. Registro ANVISA inválido ou vencido:\n    - No passo 13, API retorna registro inválido\n    - Sistema exibe alerta: \"Registro ANVISA inválido. Produto não poderá ser incluído em propostas.\"\n    - Sistema permite salvar em modo \"Pendente de regularização\"\n    - Produto fica bloqueado para uso em propostas\n  - E2. Falha na conexão com API ANVISA:\n    - Sistema exibe: \"Não foi possível validar registro. Tente novamente.\"\n    - Permite salvar com status \"Pendente de validação\"\n    - Agenda revalidação automática para próximas 4 horas\n  - E3. Erro no processamento do manual pela IA:\n    - Sistema exibe: \"Não foi possível extrair informações do documento.\"\n    - Permite preenchimento manual completo\n    - Registra log para análise de melhoria do modelo\n\n- **Pós-condições:**\n  1. Produto cadastrado no banco de dados com status ativo ou pendente\n  2. Registro de auditoria criado com timestamp e usuário\n  3. Código CATMAT vinculado ao produto\n  4. Produto disponível para análise de aderência em novos editais\n\n- **Regras de Negócio Aplicáveis:** RN-007\n- **Requisitos Relacionados:** RF-001, RF-002, RF-019, RF-020\n- **Origem:** DOC-001#Section8.1#Step1\n\n---\n\n**UC-002: Capturar Editais Automaticamente**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** PNCP/ComprasNet (A-005)\n- **Objetivo:** Monitorar fontes públicas e capturar novos editais relevantes de forma automática\n\n- **Pré-condições:**\n  1. Agente de captura configurado e ativo\n  2. Fontes de dados (PNCP, portais estaduais) acessíveis\n  3. Filtros de interesse da empresa configurados\n\n- **Fluxo Principal:**\n  1. [Sistema] Trigger automático dispara ciclo de captura (4x/dia)\n  2. [Agente IA] Autentica nas APIs dos portais públicos\n  3. [Agente IA] Consulta API PNCP com filtros configurados\n  4. [Sistema Externo] Retorna lista de editais novos/atualizados\n  5. [Agente IA] Para cada edital, verifica se já existe na base local\n  6. [Agente IA] Baixa documentos anexos (edital, TR, anexos)\n  7. [Sistema] Armazena arquivos no storage com versionamento\n  8. [Agente IA] Extrai metadados: número, órgão, modalidade, valor, prazos\n  9. [Sistema] Classifica edital automaticamente por categoria (Comodato, Venda, etc.)\n  10. [Sistema] Registra log de captura com timestamp e estatísticas\n  11. [Sistema] Enfileira editais para análise de aderência\n  12. [Sistema] Gera resumo do ciclo de captura\n\n- **Fluxos Alternativos:**\n  - A1. Portal estadual com scraping:\n    - No passo 3, para portais sem API, ativa módulo de scraping\n    - Agente navega páginas HTML e extrai dados estruturados\n    - Aplica regras específicas por portal\n  - A2. Edital já existente com atualização:\n    - No passo 5, edital existe mas foi atualizado\n    - Sistema cria nova versão mantendo histórico\n    - Notifica usuário sobre mudanças detectadas\n\n- **Fluxos de Exceção:**\n  - E1. API PNCP indisponível:\n    - Sistema registra falha e agenda retry em 30 minutos\n    - Envia alerta para administrador após 3 falhas consecutivas\n    - Prossegue com outras fontes disponíveis\n  - E2. Rate limiting atingido:\n    - Sistema aplica backoff exponencial\n    - Distribui requests ao longo do tempo\n    - Completa ciclo no próximo período\n\n- **Pós-condições:**\n  1. Novos editais armazenados na base de dados\n  2. Documentos anexos arquivados no storage\n  3. Log de captura gerado com métricas\n  4. Fila de análise de aderência atualizada\n\n- **Regras de Negócio Aplicáveis:** RN-004, RN-005\n- **Requisitos Relacionados:** RF-003, RF-018, RF-023\n- **Origem:** DOC-001#Section8.1#Step2\n\n---\n\n**UC-003: Analisar Aderência de Edital**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Nenhum\n- **Objetivo:** Interpretar cláusulas do edital e calcular score de aderência dos produtos do portfólio\n\n- **Pré-condições:**\n  1. Edital capturado e armazenado no sistema\n  2. Portfólio de produtos cadastrado\n  3. Modelos de NLP treinados e ativos\n\n- **Fluxo Principal:**\n  1. [Sistema] Recupera edital da fila de análise\n  2. [Agente IA] Carrega documento do edital e anexos\n  3. [Agente IA] Aplica OCR se documento for imagem/scan\n  4. [Agente IA] Executa pipeline de NLP para extração de cláusulas\n  5. [Agente IA] Identifica requisitos técnicos obrigatórios\n  6. [Agente IA] Identifica requisitos administrativos e documentais\n  7. [Agente IA] Extrai especificações quantitativas (medidas, capacidades)\n  8. [Sistema] Para cada produto do portfólio, compara specs com requisitos\n  9. [Sistema] Calcula score de aderência (0-100) por produto\n  10. [Agente IA] Identifica gaps para produtos com aderência 85-99%\n  11. [Sistema] Registra análise com confidence score\n  12. [Sistema] Atualiza status do edital para \"Analisado\"\n  13. [Sistema] Notifica usuários sobre oportunidades identificadas\n\n- **Fluxos Alternativos:**\n  - A1. Confiança abaixo do threshold:\n    - No passo 11, se confidence <85%\n    - Sistema marca para revisão humana\n    - Enfileira para análise manual\n  - A2. Edital com múltiplos lotes:\n    - Sistema analisa cada lote separadamente\n    - Gera scores individuais por lote\n    - Consolida visão geral do edital\n\n- **Fluxos de Exceção:**\n  - E1. Documento corrompido ou ilegível:\n    - Sistema marca edital como \"Requer intervenção manual\"\n    - Notifica usuário para envio de versão legível\n  - E2. Timeout no processamento NLP:\n    - Sistema divide documento em chunks menores\n    - Processa em paralelo e consolida resultados\n\n- **Pós-condições:**\n  1. Score de aderência calculado para cada produto aplicável\n  2. Lista de gaps identificada para aderências parciais\n  3. Edital classificado por categoria\n  4. Histórico de análise registrado\n\n- **Regras de Negócio Aplicáveis:** RN-001\n- **Requisitos Relacionados:** RF-004, RF-005, RF-009\n- **Origem:** DOC-001#Section8.1#Step3\n\n---\n\n**UC-004: Recomendar Participação em Licitação**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Empresa Participante (A-001)\n- **Objetivo:** Emitir recomendação GO/NO-GO para participação em licitação com justificativa técnica\n\n- **Pré-condições:**\n  1. Análise de aderência concluída\n  2. Histórico de participações disponível\n  3. Portfólio com produtos validados\n\n- **Fluxo Principal:**\n  1. [Sistema] Carrega resultado da análise de aderência\n  2. [Agente IA] Avalia score de aderência dos produtos candidatos\n  3. [Agente IA] Consulta histórico de participações em editais similares\n  4. [Agente IA] Calcula score de potencial de ganho\n  5. [Sistema] Aplica regras de negócio (threshold 85%)\n  6. [Agente IA] Analisa complexidade de atendimento dos requisitos\n  7. [Agente IA] Verifica prazos legais vs capacidade de preparação\n  8. [Sistema] Consolida análise em recomendação GO/NO-GO\n  9. [Sistema] Gera justificativa técnica estruturada\n  10. [Sistema] Lista produtos recomendados com scores\n  11. [Sistema] Envia notificação para Empresa Participante\n  12. [Ator] Recebe e avalia recomendação\n\n- **Fluxos Alternativos:**\n  - A1. Múltiplos produtos aderentes:\n    - Sistema ranqueia produtos por score combinado\n    - Sugere estratégia de participação (qual produto para qual lote)\n  - A2. Score limítrofe (80-85%):\n    - Sistema marca como \"Avaliar manualmente\"\n    - Lista gaps e potencial de negociação\n\n- **Fluxos de Exceção:**\n  - E1. Histórico insuficiente para análise:\n    - Sistema gera recomendação baseada apenas em aderência técnica\n    - Indica baixa confiança no score de potencial\n  - E2. Conflito entre critérios:\n    - Sistema apresenta análise detalhada de trade-offs\n    - Solicita decisão manual do usuário\n\n- **Pós-condições:**\n  1. Recomendação GO/NO-GO registrada\n  2. Justificativa técnica disponível para consulta\n  3. Lista de produtos candidatos definida\n  4. Notificação enviada aos stakeholders\n\n- **Regras de Negócio Aplicáveis:** RN-001\n- **Requisitos Relacionados:** RF-007, RF-008, RF-009, RF-011\n- **Origem:** DOC-001#Section8.1#Step4\n\n---\n\n**UC-005: Gerar Proposta Automaticamente**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Empresa Participante (A-001)\n- **Objetivo:** Montar proposta completa com texto técnico, documentos e anexos\n\n- **Pré-condições:**\n  1. Participação confirmada pela empresa\n  2. Certidões válidas disponíveis\n  3. Produtos selecionados para proposta\n  4. Templates de proposta configurados\n\n- **Fluxo Principal:**\n  1. [Sistema] Carrega contexto do edital e produtos selecionados\n  2. [Agente IA] Seleciona template adequado à modalidade\n  3. [Agente IA] Gera texto técnico descritivo dos produtos\n  4. [Agente IA] Preenche especificações conforme requisitos do edital\n  5. [Sistema] Consulta Painel de Preços para referência\n  6. [Agente IA] Sugere preços baseado em histórico e referência\n  7. [Sistema] Recupera certidões válidas do repositório\n  8. [Sistema] Verifica validade de cada certidão (RN-008)\n  9. [Sistema] Coleta fichas técnicas dos produtos\n  10. [Sistema] Anexa documentos obrigatórios do checklist\n  11. [Agente IA] Compila proposta em formato estruturado\n  12. [Sistema] Gera documento final em PDF/A e DOCX\n  13. [Sistema] Valida completude contra checklist de requisitos\n  14. [Sistema] Registra proposta com status \"Aguardando revisão\"\n\n- **Fluxos Alternativos:**\n  - A1. Certidão próxima do vencimento:\n    - Sistema alerta sobre certidão que vence em <5 dias\n    - Aciona renovação automática se disponível\n    - Aguarda nova certidão antes de finalizar\n  - A2. Template não disponível:\n    - Sistema usa template genérico\n    - Marca seções para revisão manual obrigatória\n\n- **Fluxos de Exceção:**\n  - E1. Certidão vencida ou inexistente:\n    - Sistema bloqueia geração da proposta\n    - Exibe: \"Certidão [tipo] vencida. Renove antes de prosseguir.\"\n    - Lista passos para obtenção da certidão\n  - E2. Produto com ANVISA inválido:\n    - Sistema alerta usuário sobre produto com registro inválido\n    - Solicita confirmação para remover produto da proposta\n    - Sugere produtos alternativos se disponíveis\n\n- **Pós-condições:**\n  1. Proposta gerada em PDF/A e DOCX\n  2. Todos anexos obrigatórios incluídos\n  3. Validação de completude executada\n  4. Proposta disponível para revisão\n\n- **Regras de Negócio Aplicáveis:** RN-007, RN-008\n- **Requisitos Relacionados:** RF-013, RF-014, RF-022\n- **Origem:** DOC-001#Section8.1#Step5\n\n---\n\n**UC-006: Revisar e Ajustar Proposta**\n- **Ator Principal:** Gestor de Proposta (A-004)\n- **Atores Secundários:** Empresa Participante (A-001)\n- **Objetivo:** Revisar proposta gerada, fazer ajustes necessários e aprovar para submissão\n\n- **Pré-condições:**\n  1. Proposta gerada pelo sistema\n  2. Usuário com perfil de Gestor de Proposta\n  3. Proposta em status \"Aguardando revisão\"\n\n- **Fluxo Principal:**\n  1. [Ator] Acessa painel de propostas pendentes\n  2. [Sistema] Lista propostas aguardando revisão com prazos\n  3. [Ator] Seleciona proposta para revisar\n  4. [Sistema] Abre editor de proposta com preview lado a lado\n  5. [Ator] Revisa texto técnico e descrições\n  6. [Sistema] Destaca alterações em relação ao gerado pela IA\n  7. [Ator] Ajusta valores de preço se necessário\n  8. [Sistema] Recalcula totais automaticamente\n  9. [Ator] Verifica anexos e documentos\n  10. [Sistema] Valida integridade dos arquivos anexados\n  11. [Ator] Adiciona ou remove anexos conforme necessário\n  12. [Sistema] Revalida checklist de completude\n  13. [Ator] Visualiza preview final em PDF\n  14. [Ator] Aprova proposta para submissão\n  15. [Sistema] Cria versão final com assinatura digital (opcional)\n  16. [Sistema] Atualiza status para \"Aprovada - Pronta para submissão\"\n\n- **Fluxos Alternativos:**\n  - A1. Solicitação de segunda revisão:\n    - Gestor encaminha para Empresa Participante revisar\n    - Sistema envia notificação e aguarda aprovação\n  - A2. Rejeição da proposta:\n    - Gestor identifica problemas impeditivos\n    - Marca proposta como \"Rejeitada\" com motivo\n    - Sistema notifica responsáveis\n\n- **Fluxos de Exceção:**\n  - E1. Prazo de submissão expirado:\n    - Sistema bloqueia aprovação\n    - Exibe: \"Prazo de submissão encerrado em [data/hora]\"\n    - Arquiva proposta como \"Expirada\"\n  - E2. Documento corrompido detectado:\n    - Sistema alerta sobre arquivo com problema\n    - Bloqueia aprovação até correção\n    - Permite reenvio do documento\n\n- **Pós-condições:**\n  1. Proposta aprovada e versionada\n  2. Histórico de alterações registrado\n  3. Assinatura digital aplicada (se configurado)\n  4. Status atualizado para submissão\n\n- **Regras de Negócio Aplicáveis:** Nenhuma\n- **Requisitos Relacionados:** RF-015\n- **Origem:** DOC-001#Section8.1#Step6\n\n---\n\n**UC-007: Monitorar Resultado Pós-Submissão**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Empresa Participante (A-001)\n- **Objetivo:** Acompanhar resultado da licitação e analisar causas em caso de perda\n\n- **Pré-condições:**\n  1. Proposta submetida ao portal\n  2. Edital em fase de julgamento ou concluído\n  3. Integração com portal ativa\n\n- **Fluxo Principal:**\n  1. [Sistema] Agenda monitoramento periódico do edital\n  2. [Agente IA] Consulta portal público para atualizações\n  3. [Sistema Externo] Retorna status atual do certame\n  4. [Agente IA] Identifica mudança de status\n  5. [Sistema] Registra evento de atualização\n  6. [Agente IA] Detecta publicação de resultado\n  7. [Sistema] Baixa ata de julgamento e documentos\n  8. [Agente IA] Analisa resultado (ganho/perda)\n  9. [Sistema] Em caso de perda, aciona análise de causa-raiz\n  10. [Agente IA] Compara proposta com vencedora (se disponível)\n  11. [Agente IA] Identifica fatores de perda (preço, técnico, documental)\n  12. [Sistema] Gera relatório de análise\n  13. [Sistema] Notifica Empresa Participante em <24h\n  14. [Sistema] Atualiza histórico de participações\n\n- **Fluxos Alternativos:**\n  - A1. Licitação ganha:\n    - Sistema atualiza status para \"Vencedor\"\n    - Inicia fluxo de gestão de editais ganhos (UC-008)\n    - Gera relatório de sucesso\n  - A2. Licitação suspensa/anulada:\n    - Sistema registra motivo da suspensão\n    - Arquiva proposta com status correspondente\n    - Notifica usuário sobre situação\n\n- **Fluxos de Exceção:**\n  - E1. Portal indisponível:\n    - Sistema reagenda monitoramento para próxima hora\n    - Após 24h sem sucesso, alerta administrador\n  - E2. Resultado não publicado no prazo:\n    - Sistema mantém monitoramento\n    - Alerta usuário sobre atraso no resultado\n\n- **Pós-condições:**\n  1. Resultado registrado no sistema\n  2. Análise de causa-raiz disponível (se perda)\n  3. Histórico de participações atualizado\n  4. Notificações enviadas aos interessados\n\n- **Regras de Negócio Aplicáveis:** Nenhuma\n- **Requisitos Relacionados:** RF-016\n- **Origem:** DOC-001#Section8.1#Step8\n\n---\n\n**UC-008: Gerenciar Editais Ganhos**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Empresa Participante (A-001)\n- **Objetivo:** Monitorar pedidos e empenhos de contratos ganhos\n\n- **Pré-condições:**\n  1. Licitação ganha registrada no sistema\n  2. Ata de Registro de Preços ou contrato vigente\n  3. Integração com portais de empenho ativa\n\n- **Fluxo Principal:**\n  1. [Sistema] Carrega lista de editais ganhos ativos\n  2. [Agente IA] Consulta portais de transparência para empenhos\n  3. [Sistema] Identifica novos empenhos vinculados à empresa\n  4. [Sistema] Registra empenhos com valores e datas\n  5. [Agente IA] Compara valores empenhados vs valores da ata\n  6. [Sistema] Calcula percentual de execução do contrato\n  7. [Sistema] Verifica se há pedidos pendentes há mais de X dias\n  8. [Sistema] Gera alerta se detectar inatividade (RN-003)\n  9. [Sistema] Atualiza dashboard de contratos\n  10. [Sistema] Gera relatório de acompanhamento\n  11. [Sistema] Notifica usuário sobre alertas\n\n- **Fluxos Alternativos:**\n  - A1. Desvio de preço detectado:\n    - Sistema identifica variação >10% entre ata e compra real\n    - Gera alerta específico para análise\n    - Sugere ação corretiva\n  - A2. Ata próxima do vencimento:\n    - Sistema alerta 30 dias antes do vencimento\n    - Sugere preparação para nova licitação\n\n- **Fluxos de Exceção:**\n  - E1. Portal de transparência indisponível:\n    - Sistema usa dados da última consulta bem-sucedida\n    - Reagenda consulta e registra falha\n  - E2. Empenho não identificado automaticamente:\n    - Sistema permite registro manual\n    - Aprende padrão para melhorar detecção futura\n\n- **Pós-condições:**\n  1. Empenhos registrados e categorizados\n  2. Alertas gerados conforme regras\n  3. Dashboard atualizado\n  4. Histórico de execução disponível\n\n- **Regras de Negócio Aplicáveis:** RN-003\n- **Requisitos Relacionados:** RF-017, RF-012\n- **Origem:** DOC-001#Section8.1#Step9\n\n---\n\n**UC-009: Verificar Impedimentos da Empresa**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Nenhum\n- **Objetivo:** Consultar cadastros de impedimentos antes de submissão de proposta\n\n- **Pré-condições:**\n  1. CNPJ da empresa cadastrado\n  2. APIs de CEIS/CNEP/CEPIM disponíveis\n  3. Proposta pronta para submissão\n\n- **Fluxo Principal:**\n  1. [Sistema] Trigger de verificação antes de submissão\n  2. [Agente IA] Recupera CNPJ da empresa\n  3. [Agente IA] Consulta API do CEIS (Cadastro de Empresas Inidôneas)\n  4. [Sistema Externo] Retorna status de consulta CEIS\n  5. [Agente IA] Consulta API do CNEP (Cadastro Nacional de Empresas Punidas)\n  6. [Sistema Externo] Retorna status de consulta CNEP\n  7. [Agente IA] Consulta API do CEPIM (Cadastro de Entidades Privadas sem fins lucrativos Impedidas)\n  8. [Sistema Externo] Retorna status de consulta CEPIM\n  9. [Sistema] Consolida resultados das 3 consultas\n  10. [Sistema] Registra resultado com timestamp\n  11. [Sistema] Libera submissão se sem impedimentos\n\n- **Fluxos Alternativos:**\n  - A1. Verificação agendada (não sob demanda):\n    - Sistema executa verificação semanal automática\n    - Atualiza status geral da empresa no cadastro\n\n- **Fluxos de Exceção:**\n  - E1. Empresa com impedimento detectado:\n    - Sistema bloqueia submissão automaticamente\n    - Exibe: \"Empresa consta em [CEIS/CNEP/CEPIM]. Motivo: [descrição]\"\n    - Notifica administrador e bloqueia novas propostas\n    - Aplica RN-006\n  - E2. API de impedimentos indisponível:\n    - Sistema registra tentativa com falha\n    - Bloqueia submissão por precaução\n    - Permite substituição manual com justificativa\n\n- **Pós-condições:**\n  1. Status de impedimento atualizado\n  2. Log de consulta registrado\n  3. Submissão liberada ou bloqueada conforme resultado\n\n- **Regras de Negócio Aplicáveis:** RN-006\n- **Requisitos Relacionados:** RF-024\n- **Origem:** DOC-001#Section5.2#BR-006\n\n---\n\n**UC-010: Consultar Histórico de Submissões**\n- **Ator Principal:** Empresa Participante (A-001)\n- **Atores Secundários:** Agente de IA (A-003)\n- **Objetivo:** Visualizar histórico de participações em licitações com análise de resultados\n\n- **Pré-condições:**\n  1. Usuário autenticado\n  2. Histórico de participações existente\n\n- **Fluxo Principal:**\n  1. [Ator] Acessa módulo \"Histórico\" no menu\n  2. [Sistema] Carrega lista de participações\n  3. [Ator] Aplica filtros (período, órgão, resultado, modalidade)\n  4. [Sistema] Atualiza lista conforme filtros\n  5. [Ator] Seleciona participação para detalhes\n  6. [Sistema] Exibe detalhes: edital, proposta, resultado\n  7. [Sistema] Mostra análise de causa se foi perda\n  8. [Ator] Solicita relatório consolidado\n  9. [Sistema] Gera relatório com estatísticas\n  10. [Agente IA] Adiciona insights de padrões identificados\n  11. [Sistema] Disponibiliza relatório para download\n\n- **Fluxos Alternativos:**\n  - A1. Exportação de dados:\n    - Ator exporta histórico em CSV/Excel\n    - Sistema gera arquivo e disponibiliza download\n\n- **Fluxos de Exceção:**\n  - E1. Sem histórico para filtros aplicados:\n    - Sistema exibe: \"Nenhuma participação encontrada para os filtros selecionados\"\n    - Sugere ajustar critérios de busca\n\n- **Pós-condições:**\n  1. Histórico visualizado\n  2. Relatório gerado (se solicitado)\n  3. Log de acesso registrado\n\n- **Regras de Negócio Aplicáveis:** Nenhuma\n- **Requisitos Relacionados:** RF-010\n- **Origem:** DOC-001#Section3.1#FR-010\n\n---\n\n**UC-011: Classificar Edital por Modalidade**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Nenhum\n- **Objetivo:** Classificar editais capturados nas categorias de negócio definidas\n\n- **Pré-condições:**\n  1. Edital capturado no sistema\n  2. Regras de classificação configuradas\n\n- **Fluxo Principal:**\n  1. [Sistema] Carrega edital para classificação\n  2. [Agente IA] Extrai texto do objeto da licitação\n  3. [Agente IA] Identifica palavras-chave de modalidade\n  4. [Agente IA] Analisa estrutura de fornecimento\n  5. [Sistema] Aplica hierarquia de classificação (RN-002)\n  6. [Agente IA] Determina categoria principal\n  7. [Sistema] Atribui score de confiança da classificação\n  8. [Sistema] Registra classificação com justificativa\n  9. [Sistema] Atualiza índices de busca\n\n- **Fluxos Alternativos:**\n  - A1. Classificação ambígua:\n    - Sistema atribui múltiplas categorias possíveis\n    - Marca para revisão humana\n  - A2. Categoria não mapeada:\n    - Sistema classifica como \"Outros\"\n    - Notifica administrador para criar nova categoria\n\n- **Fluxos de Exceção:**\n  - E1. Texto insuficiente para classificação:\n    - Sistema marca como \"Pendente de classificação\"\n    - Aguarda análise manual\n\n- **Pós-condições:**\n  1. Edital classificado em categoria\n  2. Índices de busca atualizados\n  3. Log de classificação registrado\n\n- **Regras de Negócio Aplicáveis:** RN-002\n- **Requisitos Relacionados:** RF-006\n- **Origem:** DOC-001#Section3.1#FR-006\n\n---\n\n**UC-012: Sugerir Preço para Proposta**\n- **Ator Principal:** Agente de IA (A-003)\n- **Atores Secundários:** Empresa Participante (A-001)\n- **Objetivo:** Calcular e sugerir preço competitivo para proposta\n\n- **Pré-condições:**\n  1. Proposta em elaboração\n  2. Histórico de preços disponível\n  3. Painel de Preços acessível\n\n- **Fluxo Principal:**\n  1. [Sistema] Identifica produtos da proposta\n  2. [Agente IA] Consulta histórico de preços praticados\n  3. [Agente IA] Busca preços de referência no Painel de Preços\n  4. [Sistema] Recupera preços de editais similares anteriores\n  5. [Agente IA] Analisa tendência de preços do mercado\n  6. [Agente IA] Calcula faixa de preço sugerida (mín-máx)\n  7. [Sistema] Considera margem de lucro configurada\n  8. [Sistema] Gera sugestão de preço unitário e total\n  9. [Sistema] Apresenta sugestão com justificativa\n  10. [Ator] Aceita sugestão ou informa preço manual\n  11. [Sistema] Registra decisão e atualiza proposta\n\n- **Fluxos Alternativos:**\n  - A1. Sem histórico suficiente:\n    - Sistema usa apenas Painel de Preços como referência\n    - Indica baixa confiança na sugestão\n  - A2. Substituição manual:\n    - Ator informa preço diferente do sugerido\n    - Sistema valida contra preço de referência\n    - Alerta se muito abaixo ou acima da faixa\n\n- **Fluxos de Exceção:**\n  - E1. Painel de Preços indisponível:\n    - Sistema usa apenas histórico interno\n    - Marca sugestão como \"Sem referência oficial\"\n  - E2. Produto novo sem histórico:\n    - Sistema solicita entrada manual obrigatória\n    - Registra como baseline para futuras sugestões\n\n- **Pós-condições:**\n  1. Preço definido para proposta\n  2. Justificativa de precificação registrada\n  3. Histórico de preços atualizado\n\n- **Regras de Negócio Aplicáveis:** Nenhuma\n- **Requisitos Relacionados:** RF-014, RF-021\n- **Origem:** DOC-001#Section3.1#FR-014\n\n---\n\n## 6. Modelo de Dados Conceitual\n\n### 6.1 Entidades Principais\n\n| Entidade | Descrição | Contexto |\n|----------|-----------|----------|\n| Produto | Item do portfólio com características técnicas | DOC-001#Section7.1#Produto |\n| Edital | Certame público com cláusulas técnicas | DOC-001#Section7.1#Edital |\n| Proposta | Documento para submissão em licitação | DOC-001#Section7.1#Proposta |\n| Ata_Registro_Precos | Contrato com preços registrados | DOC-001#Section7.1#Ata |\n| Empenho | Compromisso de pagamento | DOC-001#Section7.1#Empenho |\n| Historico_Participacao | Registro de submissões | DOC-001#Section7.1#Historico |\n\n### 6.2 Relacionamentos\n\n```\nProduto (1) ---> (N) Proposta_Item\nProduto (N) ---> (1) Classe\nProduto (1) ---> (0..1) Registro_ANVISA\nEdital (1) ---> (N) Proposta\nEdital (1) ---> (N) Item_Edital\nProposta (N) ---> (1) Empresa\nProposta (1) ---> (N) Proposta_Item\nAta_Registro_Precos (N) ---> (1) Edital\nAta_Registro_Precos (1) ---> (N) Pedido\nEmpenho (N) ---> (1) Ata_Registro_Precos\nHistorico_Participacao (N) ---> (1) Empresa\nHistorico_Participacao (N) ---> (1) Edital\n```\n\n### 6.3 Atributos Principais\n\n**Produto:**\n- id: UUID (PK)\n- nome: String (NOT NULL)\n- classe: String (NOT NULL)\n- specs_tecnicas: JSON (NOT NULL)\n- registro_anvisa: String\n- catmat: String\n\n**Edital:**\n- id: UUID (PK)\n- numero: String (NOT NULL)\n- orgao: String (NOT NULL)\n- modalidade: Enum (NOT NULL)\n- data_abertura: DateTime (NOT NULL)\n- itens: JSON (NOT NULL)\n- status: Enum (NOT NULL)\n\n**Proposta:**\n- id: UUID (PK)\n- edital_id: UUID (FK)\n- empresa_id: UUID (FK)\n- valor_total: Decimal (NOT NULL)\n- status: Enum (NOT NULL)\n- data_geracao: DateTime (NOT NULL)\n\n### 6.4 Regras de Integridade\n\n1. Produto com registro ANVISA vencido não pode ser incluído em proposta\n2. Proposta deve ter pelo menos um item\n3. Empenho deve estar vinculado a Ata vigente\n4. Histórico de participação deve referenciar edital existente\n\n---\n\n## 7. Interfaces do Sistema\n\n### 7.1 Interfaces de Usuário\n\n**IU-001: Dashboard Principal**\n- Visão geral de editais capturados, propostas em andamento, contratos ativos\n- Indicadores: oportunidades identificadas, prazos próximos, alertas\n- Acesso rápido às principais funcionalidades\n\n**IU-002: Módulo de Portfólio**\n- Lista de produtos com filtros e busca\n- Formulário dinâmico de cadastro por classe\n- Integração com envio de documentos\n\n**IU-003: Painel de Propostas**\n- Editor de proposta com preview\n- Checklist de requisitos interativo\n- Controle de versões e aprovações\n\n**IU-004: Central de Alertas**\n- Notificações de prazos, vencimentos, resultados\n- Configuração de preferências de notificação\n\n### 7.2 Interfaces de Hardware\n\nNão aplicável - sistema web-based.\n\n### 7.3 Interfaces de Software (APIs)\n\n**API-001: PNCP**\n- Tipo: REST\n- Método: GET\n- Path: /api/pncp/editais\n- Input: {filtros, data_inicio, data_fim}\n- Output: {editais[], total, pagina}\n- Origem: DOC-001#Section3.4#FR-018\n\n**API-002: ANVISA**\n- Tipo: REST\n- Método: GET\n- Path: /api/anvisa/registro/{numero}\n- Input: {numero_registro}\n- Output: {valido, data_validade, produto}\n- Origem: DOC-001#Section3.4#FR-019\n\n**API-003: CATMAT/CATSER**\n- Tipo: REST\n- Método: GET\n- Path: /api/catmat/busca\n- Input: {termo, categoria}\n- Output: {itens[], codigo}\n- Origem: DOC-001#Section3.4#FR-020\n\n**API-004: Painel de Preços**\n- Tipo: REST\n- Método: GET\n- Path: /api/painel-precos/consulta\n- Input: {catmat, periodo}\n- Output: {preco_medio, historico[]}\n- Origem: DOC-001#Section3.4#FR-021\n\n**API-005: Certidões**\n- Tipo: REST\n- Método: GET\n- Path: /api/certidoes/{tipo}\n- Input: {cnpj, tipo}\n- Output: {certidao, validade, arquivo}\n- Origem: DOC-001#Section3.4#FR-022\n\n**API-006: CEIS/CNEP/CEPIM**\n- Tipo: REST\n- Método: GET\n- Path: /api/impedimentos/consulta\n- Input: {cnpj}\n- Output: {impedido, motivo, cadastros[]}\n- Origem: DOC-001#Section3.5#FR-024\n\n### 7.4 Interfaces de Comunicação\n\n- HTTPS/TLS 1.3 para todas as comunicações\n- API Gateway com autenticação OAuth 2.0\n- Rate limiting conforme limites dos portais\n- Circuit breaker para falhas de integração\n\n---\n\n## 8. Regras de Negócio\n\n**RN-001: Notificação de Gaps**\n- **Descrição:** Gerar notificação com lista de gaps e sugestões de melhoria para aderências parciais\n- **Condições:** Aderência >= 85% E < 100%\n- **Ações:** Gerar notificação com lista de gaps específicos e sugestões acionáveis\n- **Validações:** Verificar se notificação contém gaps específicos e sugestões acionáveis\n- **Requisitos Relacionados:** RF-005\n- **Origem:** DOC-001#Section5.1#BR-001\n\n**RN-002: Hierarquia de Classificação**\n- **Descrição:** Seguir ordem hierárquica na classificação de editais\n- **Condições:** Quando classificar edital\n- **Ações:** Seguir ordem: Comodato > Aluguel c/ reagentes > Aluguel s/ reagentes > Venda > Consumo reagente > Consumo insumos\n- **Validações:** Verificar se classificação segue hierarquia definida\n- **Requisitos Relacionados:** RF-006\n- **Origem:** DOC-001#Section5.1#BR-002\n\n**RN-003: Alerta de Inatividade**\n- **Descrição:** Gerar alerta quando não houver pedidos em período configurado\n- **Condições:** Pedido não ocorrer em X dias (parametrizável, default 30 dias, range permitido: 7-90 dias)\n- **Ações:** Gerar alerta de falta de pedidos\n- **Validações:** Verificar se alerta é gerado após período configurado sem pedidos\n- **Requisitos Relacionados:** RF-017\n- **Origem:** DOC-001#Section5.1#BR-003\n\n**RN-004: Prazos por Modalidade Pregão**\n- **Descrição:** Respeitar prazo mínimo legal para modalidade Pregão\n- **Condições:** Modalidade = Pregão\n- **Ações:** Prazo mínimo = 8 dias úteis\n- **Validações:** Verificar se sistema respeita prazo mínimo de 8 dias úteis\n- **Requisitos Relacionados:** RF-025\n- **Origem:** DOC-001#Section5.2#BR-004\n\n**RN-005: Prazos Concorrência**\n- **Descrição:** Respeitar prazo mínimo legal para modalidade Concorrência\n- **Condições:** Modalidade = Concorrência\n- **Ações:** Prazo mínimo = 35 dias\n- **Validações:** Verificar se sistema respeita prazo mínimo de 35 dias\n- **Requisitos Relacionados:** RF-025\n- **Origem:** DOC-001#Section5.2#BR-005\n\n**RN-006: Bloqueio por Impedimento**\n- **Descrição:** Bloquear submissão de propostas para empresas impedidas\n- **Condições:** Empresa consta em CEIS/CNEP/CEPIM\n- **Ações:** Bloquear submissão e alertar usuário\n- **Validações:** Verificar se submissão é bloqueada e alerta é gerado\n- **Requisitos Relacionados:** RF-024\n- **Origem:** DOC-001#Section5.2#BR-006\n\n**RN-007: Validação ANVISA**\n- **Descrição:** Bloquear produtos de saúde sem registro ANVISA válido\n- **Condições:** Produto = equipamento médico E registro ANVISA vencido/inexistente\n- **Ações:** Bloquear inclusão em proposta\n- **Validações:** Verificar se produto com registro inválido é bloqueado\n- **Requisitos Relacionados:** RF-019\n- **Origem:** DOC-001#Section5.3#BR-007\n\n**RN-008: Certidão Vencida**\n- **Descrição:** Alertar sobre certidões próximas do vencimento\n- **Condições:** Certidão vence em <5 dias úteis\n- **Ações:** Gerar alerta de renovação urgente\n- **Validações:** Verificar se alerta é gerado para certidões próximas do vencimento\n- **Requisitos Relacionados:** RF-022\n- **Origem:** DOC-001#Section5.3#BR-008\n\n---\n\n## 9. Fluxos de Trabalho\n\n### 9.1 Processos Principais\n\n**Workflow-001: Ciclo de Participação em Licitação**\n\n| Passo | Descrição | Ator | Requisitos |\n|-------|-----------|------|------------|\n| 1 | Cadastro de Portfólio | A-001 | RF-001, RF-002 |\n| 2 | Captura de Edital | A-003 | RF-003 |\n| 3 | Análise de Aderência | A-003 | RF-004, RF-005, RF-009 |\n| 4 | Recomendação de Participação | A-003 | RF-007, RF-008 |\n| 5 | Geração de Proposta | A-003 | RF-013, RF-014 |\n| 6 | Revisão e Ajustes | A-004 | RF-015 |\n| 7 | Submissão | A-001 | Envio ao portal |\n| 8 | Monitoramento Pós-Submissão | A-003 | RF-016 |\n| 9 | Gestão de Editais Ganhos | A-003 | RF-017, RF-012 |\n\n**Triggers:**\n- Novo edital capturado\n- Empresa decide participar\n\n**Outcomes:**\n- Proposta submetida com sucesso\n- Licitação ganha\n- Licitação perdida com análise\n\n**Origem:** DOC-001#Section8.1\n\n### 9.2 Interações entre Componentes\n\n```\n[Portal Público] --> [Agente Captura] --> [Banco de Dados]\n                                              |\n[Portfólio] --> [Agente Análise] <-----------+\n                     |\n                     v\n            [Recomendação GO/NO-GO]\n                     |\n                     v\n            [Gerador de Proposta] --> [Painel Revisão]\n                                           |\n                                           v\n                                    [Submissão] --> [Monitoramento]\n```\n\n### 9.3 Sequências Críticas\n\n**Validação Pré-Submissão:**\n1. Verificar impedimentos (CEIS/CNEP/CEPIM)\n2. Validar certidões vigentes\n3. Confirmar registro ANVISA dos produtos\n4. Verificar prazo legal por modalidade\n5. Aprovar proposta\n6. Aplicar assinatura digital\n7. Submeter ao portal\n\n---\n\n## 10. Análise de Arquitetura Preliminar\n\n### 10.1 Componentes e Serviços Necessários\n\n| Componente | Responsabilidade | Padrão |\n|------------|------------------|--------|\n| API Gateway | Autenticação, rate limiting | OWASP API Security |\n| Serviço de Captura | Monitoramento de portais | Event-Driven |\n| Motor NLP | Interpretação de editais | Document Processing Pipeline |\n| Gerador de Propostas | Montagem de documentos | Template Engine |\n| Serviço de Notificações | Alertas e comunicações | Pub/Sub |\n| Auditoria | Logs imutáveis | Event Sourcing |\n\n### 10.2 Padrões de Interação\n\n- **Event-Driven Architecture:** Para captura assíncrona de editais\n- **CQRS:** Separação de leitura/escrita para histórico\n- **Saga Pattern:** Transações distribuídas em validações múltiplas\n- **Circuit Breaker:** Resiliência em integrações externas\n\n### 10.3 Integrações Externas\n\n| Sistema | Propósito | Criticidade |\n|---------|-----------|-------------|\n| PNCP | Editais federais | Alta |\n| ANVISA | Validação de registros | Alta |\n| CATMAT | Classificação de produtos | Média |\n| Painel de Preços | Referência de preços | Média |\n| CEIS/CNEP/CEPIM | Impedimentos | Alta |\n| Portais Estaduais | Editais estaduais | Média |\n\n### 10.4 Considerações de Performance\n\n- Processamento de edital: <5 minutos\n- Geração de proposta: <10 segundos\n- Busca em histórico: <2 segundos\n- Ciclo de captura: <30 minutos\n\n### 10.5 Considerações de Segurança\n\n- Criptografia AES-256 em repouso (ISO 27001)\n- TLS 1.3 em trânsito\n- Assinatura digital ICP-Brasil\n- Audit trail imutável 5 anos\n- Conformidade LGPD\n\n### 10.6 Considerações de Escalabilidade\n\n- Horizontal scaling para agentes de captura\n- Cache distribuído (Redis) para dados frequentes\n- Warm Standby DR em região diferente\n- SLA 99.5%, RTO <4h, RPO <1h\n\n### 10.7 Tecnologias Recomendadas\n\n> **Nota:** As tecnologias abaixo são sugestões preliminares sujeitas a validação durante a fase de arquitetura detalhada.\n\n| Categoria | Tecnologia | Justificativa |\n|-----------|------------|---------------|\n| NLP | BERTimbau, LangChain | Português brasileiro |\n| Banco de Dados | PostgreSQL | ACID, JSON support |\n| Busca | Elasticsearch | Histórico indexado |\n| Fila | RabbitMQ/Kafka | Event-driven |\n| Cache | Redis | Performance |\n| Orquestração | Apache Airflow | Workflows complexos |\n| OCR | Azure Form Recognizer | Documentos escaneados |\n\n---\n\n## 11. Controle de Qualidade\n\n### 11.1 Critérios de Aceitação Gerais\n\n1. Todos os requisitos funcionais implementados conforme especificação\n2. Precisão de NLP >90% em extração de cláusulas\n3. Tempo de resposta dentro dos limites definidos\n4. Cobertura de testes >80%\n5. Zero vulnerabilidades críticas de segurança\n6. Conformidade com LGPD verificada\n\n### 11.2 Estratégia de Testes\n\n| Tipo | Escopo | Ferramenta Sugerida |\n|------|--------|--------------------|\n| Unitário | Componentes individuais | pytest, Jest |\n| Integração | APIs e serviços | Postman, pytest |\n| E2E | Fluxos completos | Cypress, Playwright |\n| Performance | Carga e stress | Locust, k6 |\n| Segurança | OWASP Top 10 | OWASP ZAP, Burp |\n| NLP | Precisão de extração | Dataset de validação |\n\n### 11.3 Riscos Identificados\n\n| Risco | Probabilidade | Impacto | Mitigação |\n|-------|---------------|---------|----------|\n| API PNCP indisponível | Média | Alto | Circuit breaker, retry |\n| Mudança em formato de editais | Alta | Médio | Modelos adaptativos |\n| Crescimento de volume | Média | Médio | Horizontal scaling |\n| Vazamento de dados | Baixa | Crítico | Criptografia, LGPD |\n| Falha no DR | Baixa | Alto | Testes periódicos |\n\n### 11.4 Complexidades Previstas\n\n1. **NLP em português jurídico:** Jargão específico de licitações requer treinamento especializado\n2. **Diversidade de portais:** Cada estado pode ter formato diferente\n3. **Validações em tempo real:** Múltiplas APIs governamentais com latências variáveis\n4. **Assinatura digital:** Integração com certificados A1/A3 ICP-Brasil\n5. **Histórico de 5 anos:** Volume de dados significativo para indexação\n\n---\n\n## 12. Glossário\n\n**Aderência:** Grau de conformidade entre as especificações de um produto e os requisitos técnicos estabelecidos em um edital de licitação, expresso em percentual (0-100%).\n\n**ANVISA:** Agência Nacional de Vigilância Sanitária, órgão regulador responsável pelo registro de produtos de saúde no Brasil.\n\n**Ata de Registro de Preços (ARP):** Documento vinculativo que estabelece preços registrados para futura contratação, com validade determinada.\n\n**CATMAT:** Catálogo de Materiais do Sistema Integrado de Administração de Serviços Gerais (SIASG), utilizado para classificação de produtos em compras governamentais.\n\n**CEIS:** Cadastro de Empresas Inidôneas e Suspensas, mantido pela CGU, que lista empresas impedidas de participar de licitações.\n\n**CNEP:** Cadastro Nacional de Empresas Punidas, registro de empresas que sofreram penalidades administrativas.\n\n**CEPIM:** Cadastro de Entidades Privadas sem Fins Lucrativos Impedidas.\n\n**Comodato:** Modalidade de contrato onde o equipamento é emprestado sem custo em troca do fornecimento contínuo de insumos/reagentes.\n\n**Empenho:** Ato emanado de autoridade competente que cria para o Estado obrigação de pagamento.\n\n**Gap:** Diferença identificada entre a especificação requerida no edital e a característica disponível no produto oferecido.\n\n**ICP-Brasil:** Infraestrutura de Chaves Públicas Brasileira, sistema de certificação digital oficial do Brasil.\n\n**LGPD:** Lei Geral de Proteção de Dados (Lei 13.709/2018), legislação brasileira de proteção de dados pessoais.\n\n**NLP:** Natural Language Processing (Processamento de Linguagem Natural), tecnologia de IA para análise e interpretação de textos.\n\n**PNCP:** Portal Nacional de Contratações Públicas, plataforma oficial para publicação de licitações conforme Lei 14.133/2021.\n\n**Pregão:** Modalidade de licitação para aquisição de bens e serviços comuns, com prazo mínimo de 8 dias úteis.\n\n**Score:** Pontuação numérica atribuída a uma avaliação, utilizada para aderência técnica e potencial de ganho.\n\n**Upload:** Ação de enviar arquivo do dispositivo local para o sistema.\n\n**Override:** Substituição manual de um valor sugerido automaticamente pelo sistema.\n\n---\n\n## 13. Rastreabilidade\n\n### 13.1 Matriz de Rastreabilidade\n\n| Requisito Original | Seção | RF | UC | RN |\n|--------------------|-------|----|----|----|
| DOC-001#Section3.2#FR-001 | 3 | RF-001 | UC-001 | RN-007 |\n| DOC-001#Section3.1#FR-002 | 3 | RF-002 | UC-001 | - |\n| DOC-001#Section3.2#FR-003 | 3 | RF-003 | UC-002 | RN-004, RN-005 |\n| DOC-001#Section3.1#FR-004 | 3 | RF-004 | UC-003 | RN-001 |\n| DOC-001#Section3.1#FR-005 | 3 | RF-005 | UC-003 | RN-001 |\n| DOC-001#Section3.1#FR-006 | 3 | RF-006 | UC-011 | RN-002 |\n| DOC-001#Section3.2#FR-007 | 3 | RF-007 | UC-004 | RN-001 |\n| DOC-001#Section3.1#FR-008 | 3 | RF-008 | UC-004 | - |\n| DOC-001#Section3.1#FR-009 | 3 | RF-009 | UC-003, UC-004 | RN-001 |\n| DOC-001#Section3.1#FR-010 | 3 | RF-010 | UC-010 | - |\n| DOC-001#Section3.1#FR-011 | 3 | RF-011 | UC-004 | - |\n| DOC-001#Section3.1#FR-012 | 3 | RF-012 | UC-008 | RN-003 |\n| DOC-001#Section3.2#FR-013 | 3 | RF-013 | UC-005 | RN-007, RN-008 |\n| DOC-001#Section3.1#FR-014 | 3 | RF-014 | UC-012 | - |\n| DOC-001#Section3.2#FR-015 | 3 | RF-015 | UC-006 | - |\n| DOC-001#Section3.1#FR-016 | 3 | RF-016 | UC-007 | - |\n| DOC-001#Section3.1#FR-017 | 3 | RF-017 | UC-008 | RN-003 |\n| DOC-001#Section3.4#FR-018 | 3 | RF-018 | UC-002 | RN-004, RN-005 |\n| DOC-001#Section3.4#FR-019 | 3 | RF-019 | UC-001 | RN-007 |\n| DOC-001#Section3.4#FR-020 | 3 | RF-020 | UC-001 | - |\n| DOC-001#Section3.4#FR-021 | 3 | RF-021 | UC-012 | - |\n| DOC-001#Section3.4#FR-022 | 3 | RF-022 | UC-005 | RN-008 |\n| DOC-001#Section3.4#FR-023 | 3 | RF-023 | UC-002 | - |\n| DOC-001#Section3.5#FR-024 | 3 | RF-024 | UC-009 | RN-006 |\n| DOC-001#Section3.5#FR-025 | 3 | RF-025 | UC-002 | RN-004, RN-005 |\n| DOC-001#Section5.1#BR-001 | 8 | RF-005 | UC-003 | RN-001 |\n| DOC-001#Section5.1#BR-002 | 8 | RF-006 | UC-011 | RN-002 |\n| DOC-001#Section5.1#BR-003 | 8 | RF-017 | UC-008 | RN-003 |\n| DOC-001#Section5.2#BR-004 | 8 | RF-025 | - | RN-004 |\n| DOC-001#Section5.2#BR-005 | 8 | RF-025 | - | RN-005 |\n| DOC-001#Section5.2#BR-006 | 8 | RF-024 | UC-009 | RN-006 |\n| DOC-001#Section5.3#BR-007 | 8 | RF-019 | UC-001 | RN-007 |\n| DOC-001#Section5.3#BR-008 | 8 | RF-022 | UC-005 | RN-008 |\n\n---\n\n## 14. Apêndices\n\n### 14.1 Histórico de Versões\n\n| Versão | Data | Descrição | Autor |\n|--------|------|-----------|-------|\n| 1.0 | 2025-12-08 | Versão inicial da especificação funcional | Sistema Multi-Agente |\n\n### 14.2 Aprovações\n\n| Papel | Nome | Data | Assinatura |\n|-------|------|------|------------|\n| Product Owner | | | Pendente |\n| Tech Lead | | | Pendente |\n| QA Lead | | | Pendente |\n| Arquiteto | | | Pendente |\n\n---\n\n## 15. Limitações e Próximos Passos\n\n### 15.1 Gaps Identificados\n\n| # | Seção | Descrição | Pergunta |\n|---|-------|-----------|----------|\n| 1 | 8 | Valor parametrizável 'X dias' precisa de range mais específico | Qual o range aceitável para o parâmetro X dias além do default de 30 dias (sugerido: 7-90 dias)? |\n| 2 | 2 | Volume esperado de editais não especificado | Qual o volume esperado de editais capturados por dia/mês? |\n| 3 | 2 | Número de usuários simultâneos não especificado | Quantos usuários simultâneos o sistema deve suportar? |\n| 4 | 7 | Portais estaduais/municipais prioritários não listados | Quais portais estaduais/municipais são prioritários para integração? |\n| 5 | 10 | Tecnologias são sugestões preliminares | Confirmar escolhas tecnológicas durante fase de arquitetura detalhada |\n\n### 15.2 Extrapolações Identificadas\n\nOs seguintes itens foram inferidos a partir dos requisitos, mas não estão explicitamente documentados:\n\n1. **UC-001 Fluxo A3:** Processo de solicitação de nova classe de produto quando categoria não existe\n2. **UC-005 Fluxo E2:** Remoção automática de produto com ANVISA inválido (inferido de RN-007)\n3. **Seção 10.7:** Tecnologias recomendadas são sugestões baseadas em boas práticas, não requisitos\n\n### 15.3 Recomendações\n\n1. Validar parâmetros configuráveis (X dias) com stakeholders\n2. Definir lista de portais estaduais prioritários para MVP\n3. Realizar estimativa de volumetria para dimensionamento\n4. Confirmar stack tecnológico com equipe de arquitetura\n5. Obter aprovações pendentes antes de iniciar desenvolvimento\n\n---\n\n*Especificação Funcional gerada automaticamente pelo Sistema Multi-Agente de Documentação. Versão 1.0.*",
  "gaps": [
    {
      "section": 8,
      "title": "Parâmetro X dias",
      "missing": "Range específico para parâmetro de inatividade",
      "question": "Qual o range aceitável para o parâmetro X dias além do default de 30 dias?"
    },
    {
      "section": 2,
      "title": "Volume de editais",
      "missing": "Estimativa de volume de editais",
      "question": "Qual o volume esperado de editais capturados por dia/mês?"
    },
    {
      "section": 2,
      "title": "Usuários simultâneos",
      "missing": "Capacidade de usuários",
      "question": "Quantos usuários simultâneos o sistema deve suportar?"
    },
    {
      "section": 7,
      "title": "Portais prioritários",
      "missing": "Lista de portais estaduais/municipais",
      "question": "Quais portais estaduais/municipais são prioritários para integração?"
    },
    {
      "section": 10,
      "title": "Validação tecnológica",
      "missing": "Confirmação de stack tecnológico",
      "question": "Confirmar escolhas tecnológicas durante fase de arquitetura detalhada"
    }
  ],
  "warnings": [
    {
      "type": "extrapolation",
      "message": "UC-001 Fluxo A3 (classe de produto não existente) foi inferido dos requisitos"
    },
    {
      "type": "extrapolation",
      "message": "UC-005 Fluxo E2 (remoção automática por ANVISA inválido) foi inferido de RN-007"
    },
    {
      "type": "recommendation",
      "message": "Seção 10.7 contém sugestões tecnológicas preliminares sujeitas a validação"
    }
  ],
  "corrections_applied": [
    {
      "location": "Section 8 - RN-003",
      "original": "X dias (parametrizável, default 30 dias)",
      "corrected": "X dias (parametrizável, default 30 dias, range permitido: 7-90 dias)"
    },
    {
      "location": "Section 2.3 - Tabela de Atores",
      "original": "Tabela sem A-002",
      "corrected": "Adicionado: Órgãos Públicos (A-002) | Externo | Publicam editais, recebem propostas"
    },
    {
      "location": "Section 13 - Matriz RF-011",
      "original": "RF-011 sem UC mapeado",
      "corrected": "RF-011 mapeado para UC-004"
    },
    {
      "location": "Section 13 - Matriz RF-023",
      "original": "RF-023 sem UC mapeado",
      "corrected": "RF-023 mapeado para UC-002"
    },
    {
      "location": "Section 12 - Glossário",
      "original": "Termos técnicos em inglês ausentes",
      "corrected": "Adicionados: Upload, Override"
    },
    {
      "location": "Section 10.7",
      "original": "Tecnologias apresentadas como decisões",
      "corrected": "Adicionada nota: sugestões preliminares sujeitas a validação"
    },
    {
      "location": "Section 5 - UC-001",
      "original": "Termo 'upload' usado sem definição",
      "corrected": "Substituído por 'envio' no fluxo principal, termo definido no glossário"
    },
    {
      "location": "Section 5 - UC-005 E2",
      "original": "Remove produto automaticamente da proposta",
      "corrected": "Alerta usuário e solicita confirmação antes de remover"
    }
  ],
  "metadata": {
    "trace_id": "7f3d8a2e-5b1c-4d9f-a6e2-8c4b1f9d3e7a",
    "generation_timestamp": "2025-12-08T00:00:00Z",
    "requirements_version": 1,
    "grounding_score": 0.92,
    "compliance_score": 87,
    "total_sections": 15,
    "complete_sections": 14,
    "partial_sections": 1,
    "total_frs": 25,
    "total_ucs": 12,
    "total_rns": 8,
    "total_words": 12500
  }
}
```

================================================================================
[CREW RESULT DEBUG] Task: format_final_specification
[CREW RESULT DEBUG] Result type: <class 'dict'>
[CREW RESULT DEBUG] Has 'raw' attribute: False
[CREW RESULT DEBUG] Has 'json_dict' attribute: False
[CREW RESULT DEBUG] Has 'model_dump' method: False
================================================================================

[SPEC WORKFLOW] Task result: {'team_result': '```json\n{\n  "status": "complete",\n  "document_md": "# Especificação Funcional - Gerenciador de Editais\\n\\n**Versão:** 1.0  \\n**Data:** 2025-12-08  \\n**Baseado em:** Requisitos 
[SPEC WORKFLOW] Task completed: format_final_specification
[SPEC WORKFLOW]    Final status: failed

================================================================================
[SPECIFICATION] Workflow completed
[SPECIFICATION] Status: failed
[SPECIFICATION] Document length: 0 chars
[SPECIFICATION] Grounding score: 0
[SPECIFICATION] Compliance score: 0
[SPECIFICATION] Total sections: 0
[SPECIFICATION] Complete sections: 0
[SPECIFICATION] Gaps: 0
[SPECIFICATION] Warnings: 0
================================================================================

[SPEC GENERATION] ⚠️ Using draft document (final formatting may have failed)
[SPEC GENERATION] ❌ Error: Specification generation failed: no document produced
Traceback (most recent call last):
  File "/home/pasteurjr/progreact/langnet-interface/backend/app/routers/specification.py", line 487, in execute_specification_generation
    raise Exception("Specification generation failed: no document produced")
Exception: Specification generation failed: no document produced
